<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>简易提词器</title>
  <style>
    :root {
      --bg: linear-gradient(160deg, #0f1720, #1a2430 60%, #111827);
      --panel: rgba(27, 27, 27, 0.92);
      --text: #f5f5f5;
      --muted: #bdbdbd;
      --accent: #26c6da;
      --prompt-color: rgba(255, 255, 255, 0.92);
      --prompt-shadow: rgba(0, 0, 0, 0.45);
      --prompt-size: 40px;
      --prompt-overlay: rgba(0, 0, 0, 0.25);
      --content-overlay: rgba(0, 0, 0, 0.1);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 12px;
      padding: 16px;
    }

    .controls {
      background: var(--panel);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    textarea {
      width: 100%;
      min-height: 140px;
      resize: vertical;
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      background: #101010;
      color: var(--text);
      padding: 10px;
      font-size: 16px;
      line-height: 1.5;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }

    button {
      border: 0;
      border-radius: 8px;
      padding: 8px 14px;
      cursor: pointer;
      background: var(--accent);
      color: #032229;
      font-weight: 600;
    }

    button.secondary {
      background: #374151;
      color: #e5e7eb;
    }

    input[type="range"] {
      width: 180px;
    }

    input[type="color"] {
      width: 44px;
      height: 30px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 6px;
      background: transparent;
      padding: 0;
      cursor: pointer;
    }

    select {
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: #111827;
      color: #e5e7eb;
      padding: 6px 10px;
    }

    .label {
      color: var(--muted);
      font-size: 14px;
    }

    .teleprompter {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: var(--prompt-overlay);
      backdrop-filter: blur(1px);
      min-height: 45vh;
    }

    .teleprompter::before,
    .teleprompter::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      height: 70px;
      z-index: 2;
      pointer-events: none;
    }

    .teleprompter::before {
      top: 0;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0));
    }

    .teleprompter::after {
      bottom: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0));
    }

    .content {
      position: absolute;
      inset: 0;
      overflow-y: auto;
      padding: 18vh 24px;
      scroll-behavior: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      background: var(--content-overlay);
    }

    .content::-webkit-scrollbar {
      display: none;
    }

    .text {
      margin: 0;
      font-size: var(--prompt-size);
      line-height: 1.8;
      white-space: pre-wrap;
      color: var(--prompt-color);
      text-shadow: 0 2px 6px var(--prompt-shadow);
    }
  </style>
</head>
<body>
  <section class="controls">
    <textarea id="sourceText" placeholder="在这里输入提词内容...">欢迎使用简易提词器。
你可以在上方输入任意提词内容。
点击“开始滚动”后，文本会自动向上透明滚动。
通过控制区调整速度、配色和字号。</textarea>

    <div class="row">
      <button id="startBtn">开始滚动</button>
      <button id="pauseBtn" class="secondary">暂停</button>
      <button id="resetBtn" class="secondary">重置位置</button>
      <span class="label">滚动速度</span>
      <input id="speedRange" type="range" min="10" max="200" value="60" />
      <span id="speedValue" class="label">60 px/s</span>
    </div>

    <div class="row">
      <span class="label">背景配色</span>
      <select id="bgThemeSelect" aria-label="背景配色">
        <option value="ocean">深海蓝</option>
        <option value="dawn">日出橙</option>
        <option value="studio">演播灰</option>
        <option value="forest">森林绿</option>
        <option value="custom">自定义</option>
      </select>

      <span class="label">字体配色</span>
      <select id="textThemeSelect" aria-label="字体配色">
        <option value="classic">经典白</option>
        <option value="amber">暖黄</option>
        <option value="mint">薄荷绿</option>
        <option value="highContrast">高对比</option>
        <option value="custom">自定义</option>
      </select>

      <span class="label">字体大小</span>
      <input id="fontSizeRange" type="range" min="24" max="72" value="40" />
      <span id="fontSizeValue" class="label">40 px</span>
    </div>

    <div class="row">
      <span class="label">自定义背景</span>
      <input id="customBgColor" type="color" value="#1a2430" aria-label="自定义背景颜色" />
      <span class="label">自定义文字</span>
      <input id="customTextColor" type="color" value="#ffffff" aria-label="自定义文字颜色" />
    </div>
  </section>

  <section class="teleprompter" aria-label="提词显示区">
    <div id="content" class="content">
      <p id="displayText" class="text"></p>
    </div>
  </section>

  <script>
    const sourceText = document.getElementById("sourceText");
    const displayText = document.getElementById("displayText");
    const content = document.getElementById("content");
    const startBtn = document.getElementById("startBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const resetBtn = document.getElementById("resetBtn");
    const speedRange = document.getElementById("speedRange");
    const speedValue = document.getElementById("speedValue");
    const bgThemeSelect = document.getElementById("bgThemeSelect");
    const textThemeSelect = document.getElementById("textThemeSelect");
    const fontSizeRange = document.getElementById("fontSizeRange");
    const fontSizeValue = document.getElementById("fontSizeValue");
    const customBgColor = document.getElementById("customBgColor");
    const customTextColor = document.getElementById("customTextColor");

    const backgroundThemes = {
      ocean: {
        bg: "linear-gradient(160deg, #0f1720, #1a2430 60%, #111827)",
        panel: "rgba(27, 27, 27, 0.92)",
        promptOverlay: "rgba(0, 0, 0, 0.25)",
        contentOverlay: "rgba(0, 0, 0, 0.1)",
      },
      dawn: {
        bg: "linear-gradient(160deg, #2f1b12, #6f2f1a 50%, #9d4b18)",
        panel: "rgba(46, 24, 18, 0.9)",
        promptOverlay: "rgba(32, 16, 8, 0.28)",
        contentOverlay: "rgba(20, 10, 6, 0.12)",
      },
      studio: {
        bg: "linear-gradient(150deg, #0e1116, #1f2937 55%, #111827)",
        panel: "rgba(20, 24, 30, 0.9)",
        promptOverlay: "rgba(8, 10, 14, 0.3)",
        contentOverlay: "rgba(0, 0, 0, 0.14)",
      },
      forest: {
        bg: "linear-gradient(160deg, #0d1f18, #1c3b2b 55%, #1f5137)",
        panel: "rgba(18, 38, 28, 0.9)",
        promptOverlay: "rgba(10, 24, 16, 0.28)",
        contentOverlay: "rgba(6, 16, 10, 0.12)",
      },
    };

    const textThemes = {
      classic: {
        color: "rgba(255, 255, 255, 0.92)",
        shadow: "rgba(0, 0, 0, 0.45)",
      },
      amber: {
        color: "rgba(255, 228, 156, 0.95)",
        shadow: "rgba(42, 24, 0, 0.5)",
      },
      mint: {
        color: "rgba(190, 255, 232, 0.95)",
        shadow: "rgba(0, 24, 16, 0.55)",
      },
      highContrast: {
        color: "#ffffff",
        shadow: "rgba(0, 0, 0, 0.85)",
      },
    };

    let isRunning = false;
    let speed = Number(speedRange.value);
    let lastTime = 0;
    let rafId = 0;

    function syncText() {
      displayText.textContent = sourceText.value || "";
    }

    function darkenHex(hex, ratio) {
      const safeHex = hex.replace("#", "");
      const fullHex = safeHex.length === 3
        ? safeHex.split("").map((ch) => ch + ch).join("")
        : safeHex;
      const r = Math.max(0, Math.floor(parseInt(fullHex.slice(0, 2), 16) * ratio));
      const g = Math.max(0, Math.floor(parseInt(fullHex.slice(2, 4), 16) * ratio));
      const b = Math.max(0, Math.floor(parseInt(fullHex.slice(4, 6), 16) * ratio));
      return `rgb(${r}, ${g}, ${b})`;
    }

    function applyCustomBackground() {
      const color = customBgColor.value;
      const darker = darkenHex(color, 0.55);
      const deepest = darkenHex(color, 0.35);
      const rootStyle = document.documentElement.style;
      rootStyle.setProperty("--bg", `linear-gradient(160deg, ${deepest}, ${color} 55%, ${darker})`);
      rootStyle.setProperty("--panel", "rgba(17, 24, 39, 0.88)");
      rootStyle.setProperty("--prompt-overlay", "rgba(0, 0, 0, 0.28)");
      rootStyle.setProperty("--content-overlay", "rgba(0, 0, 0, 0.12)");
    }

    function applyBackgroundTheme(name) {
      if (name === "custom") {
        applyCustomBackground();
        return;
      }
      const theme = backgroundThemes[name] || backgroundThemes.ocean;
      const rootStyle = document.documentElement.style;
      rootStyle.setProperty("--bg", theme.bg);
      rootStyle.setProperty("--panel", theme.panel);
      rootStyle.setProperty("--prompt-overlay", theme.promptOverlay);
      rootStyle.setProperty("--content-overlay", theme.contentOverlay);
    }

    function applyCustomTextTheme() {
      const color = customTextColor.value;
      const rootStyle = document.documentElement.style;
      rootStyle.setProperty("--prompt-color", color);
      rootStyle.setProperty("--prompt-shadow", "rgba(0, 0, 0, 0.75)");
    }

    function applyTextTheme(name) {
      if (name === "custom") {
        applyCustomTextTheme();
        return;
      }
      const theme = textThemes[name] || textThemes.classic;
      const rootStyle = document.documentElement.style;
      rootStyle.setProperty("--prompt-color", theme.color);
      rootStyle.setProperty("--prompt-shadow", theme.shadow);
    }

    function applyFontSize(value) {
      const size = Number(value);
      document.documentElement.style.setProperty("--prompt-size", `${size}px`);
      fontSizeValue.textContent = `${size} px`;
    }

    function tick(timestamp) {
      if (!isRunning) {
        return;
      }
      if (!lastTime) {
        lastTime = timestamp;
      }
      const deltaSec = (timestamp - lastTime) / 1000;
      lastTime = timestamp;

      content.scrollTop += speed * deltaSec;

      const maxScroll = content.scrollHeight - content.clientHeight;
      if (content.scrollTop >= maxScroll) {
        isRunning = false;
        lastTime = 0;
        return;
      }

      rafId = requestAnimationFrame(tick);
    }

    function start() {
      if (isRunning) {
        return;
      }
      isRunning = true;
      lastTime = 0;
      rafId = requestAnimationFrame(tick);
    }

    function pause() {
      isRunning = false;
      lastTime = 0;
      if (rafId) {
        cancelAnimationFrame(rafId);
      }
    }

    function reset() {
      pause();
      content.scrollTop = 0;
    }

    sourceText.addEventListener("input", () => {
      const currentRatio = content.scrollTop / Math.max(content.scrollHeight - content.clientHeight, 1);
      syncText();
      const newMax = Math.max(content.scrollHeight - content.clientHeight, 0);
      content.scrollTop = currentRatio * newMax;
    });

    speedRange.addEventListener("input", () => {
      speed = Number(speedRange.value);
      speedValue.textContent = `${speed} px/s`;
    });

    bgThemeSelect.addEventListener("change", () => {
      applyBackgroundTheme(bgThemeSelect.value);
    });

    textThemeSelect.addEventListener("change", () => {
      applyTextTheme(textThemeSelect.value);
    });

    customBgColor.addEventListener("input", () => {
      if (bgThemeSelect.value !== "custom") {
        bgThemeSelect.value = "custom";
      }
      applyBackgroundTheme("custom");
    });

    customTextColor.addEventListener("input", () => {
      if (textThemeSelect.value !== "custom") {
        textThemeSelect.value = "custom";
      }
      applyTextTheme("custom");
    });

    fontSizeRange.addEventListener("input", () => {
      applyFontSize(fontSizeRange.value);
    });

    startBtn.addEventListener("click", start);
    pauseBtn.addEventListener("click", pause);
    resetBtn.addEventListener("click", reset);

    syncText();
    applyBackgroundTheme(bgThemeSelect.value);
    applyTextTheme(textThemeSelect.value);
    applyFontSize(fontSizeRange.value);
  </script>
</body>
</html>
